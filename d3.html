<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3 Chart</title>
    <link rel="stylesheet" href="./styles.css">
    <script src="http://d3js.org/d3.v7.min.js" charset="utf-8"></script>


</head>

<body>
    <div class="frame">
        <h1 id="title">Romania's GDP</h1>
        <div class="chart">

        </div>

    </div>
    <script type="text/javascript" >

        const database = [3483.726,	4604.450, 5740.402, 8262.407, 10385.848,
         8517.598, 8194.719, 9075.961, 8491.033,
                9530.441, 10021.543, 8942.200, 9520.439,
                 10776.672, 12361.143, 12870.799, 12908.811, 14667.089, 14825.210]

        let years = []
        for (let i = 2004; i < 2023; i++) {
            years.push(i)
        }

        let dataset = []
        for ( let i = 0; i < database.length; i++ ) {
            dataset.push([years[i], database[i]])
        }
        
        console.log(dataset)

        const h = 600;
        const w = 1050;
        const padding = 10;
        const svg = d3.select('body')
            .append('svg')
            .attr('height', h)
            .attr('width', w)


        svg.selectAll('rect')
            .data(dataset)
            .enter()
            .append('rect')
            .attr('y', (d, i) => h - d[1] / 170 * 4)
            .attr('height', (d, i) => d[1] / 170 * 4)
            .attr('width', 20)
            .attr('x', (d, i) => padding + i * 50)
            .attr('fill', 'brown')
            .attr('class', 'bar')
            .append('title')
            .text((d) => d[0])

        svg.selectAll('text')
            .data(dataset)
            .enter()
            .append('text')
            .text((d) =>  Math.round(d[1]))

            .attr('x', (d, i) => padding + i * 50)
            .attr('y', (d, i) => h - d[1] / 170 * 4 - 10)
            .attr('font-size', '19px')
            .attr('fill', 'darkgrey')







        const anchor = d3.select('.chart')

            .selectAll('div')
            .data(dataset)
            .enter()
            .append('div')
            .attr('class', 'bar')
            .style('height', (d) => d[1] / 50)


    </script>

</body>